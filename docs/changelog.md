# 更新记录
## v2.8.0.20260126 (2026-01-26)
- **暂停下载状态修复**：停止任务后不再错误显示“已下载完成”，恢复任务可继续下载。
- **暂停恢复扫描修复**：修复暂停后恢复时偶发不扫描视频源的问题。
- **扫描稳定性提升**：扫描异常时会自动重试并恢复扫描，减少手动干预。
- **NFO 演职人员修复**：普通视频的 `<actor><name>` 使用UP主昵称（不再写UID数字），媒体库按演员归类不再漏视频。
- **NFO 稳定标识增强**：为 UP 主/合作成员写入 `profile`（B站空间链接），便于脚本按UID做稳定映射。

## v2.8.0.20260125 (2026-01-25)
- **配置自动迁移**：启动时自动识别旧项目配置并完成迁移，无需手动干预。
- **零损耗迁移保障**：旧配置完整保留，无法映射项会单独记录，确保可回溯。
- **迁移状态接口**：新增配置迁移状态/执行接口，便于后续升级维护。
- **迁移报告日志**：启动迁移时会输出已映射/未映射字段清单，便于核对。
- **投稿动态API开关**：UP主投稿支持切换动态API获取，解决动态视频获取需求，并在界面提示其请求特性。
- **动态API拉取策略**：首次启用时全量拉取，后续自动按增量更新。
- **aria2 单实例模式**：固定单实例多线程下载，避免多进程分流导致速度不稳定。
- **aria2 线程判断优化**：通过 Range 探测真实文件大小，避免被误判为小文件而降到单线程。
- **暂停日志降噪**：暂停任务时不再输出“分页下载失败/状态码 0”与无意义错误提示。
- **暂停状态保护**：任务已暂停时不再报“没有可用的aria2实例”。
- **分辨率筛选标准化**：按相邻档位中点划分分辨率区间。

## v2.8.0.20260124 (2026-01-24)
- **日志分轮归档**：每轮扫描会生成独立日志文件，排查问题更方便。
- **日志自动清理**：自动只保留今天与昨天的日志，较早日志会自动清理。
- **视频管理自定义显示**：支持自定义每页视频数量与每行列数，并自动保存。

## v2.8.0.20260122 (2026-01-22)
- **AI 重命名优化**：移除旧流程，统一使用批量 AI 重命名，体验更稳定。
- **番剧元数据修复**：修复番剧标题/排序写入异常（系列名不再带“第X季”）。
- **番剧封面修复**：修复番剧根目录封面显示错误（不再跟随当前季）。
- **封面重置修复**：修复重置视频封面后，部分封面文件未重新下载的问题。
- **NFO 标签增强**：现在也会包含“发现《xxx》”等音乐识别标签。
- **日志提示优化**：重置后会更明确提示下载阶段的开始与完成，避免误解。
- **性能优化**：番剧封面避免重复下载。
- **删除视频源优化**：删除视频源并选择删除本地文件时，会自动清理遗留空目录。

## v2.8.0.20260121-2 (2026-01-21)
- **窄屏适配优化**：在 **1080px 及以下** 宽度时，侧边栏会自动切换为抽屉模式（不再挤占内容区），顶栏按钮更紧凑，页面布局更合理。

## v2.8.0.20260121 (2026-01-21)
- **在线播放支持进度条拖动**：观看老视频时，现在可以自由拖动进度条了。
- **视频下载兼容性提升**：修复了某些老视频因格式问题无法下载的错误。
- **版本更新提醒**：当前版本按钮会显示是否有新版本可用，点击版本号可查看详情弹窗（移动端同样可用）。
- **时间显示优化**：页面所有时间统一显示为北京时间。

## v2.8.0.20260120 (2026-01-20)
- **画质选择更智能**：修复了部分视频在低画质设置下无法下载的问题，现在会按您设置的画质范围智能选择。
- **番剧下载修复**：修复了部分番剧因分集信息错误导致弹幕、字幕下载失败的问题。
- **文件删除更安全**：修复了在特定目录模式下，删除一个视频可能误删其他文件的问题。
- **老视频播放兼容**：修复了部分仅支持FLV格式的老视频在网页端无法播放的问题。

## v2.8.0.20260119 (2026-01-19)
- **设置页体验升级**：所有设置面板改为弹窗形式，操作更统一、直观。
- **界面优化**：移除了设置页面的随机背景图，专注于内容。
- **前端性能提升**：优化了页面组件和大型列表的交互流畅度。

## v2.8.0.20260116 (2026-01-16)
- **新增原生多线程下载**：即使不安装 aria2，现在也支持多线程分片下载，提升下载速度。
- **下载器选择更灵活**：新增开关，可自由选择优先使用原生多线程下载还是 aria2。
- **aria2 稳定性增强**：优化了连接与任务管理，在多任务环境下更稳定。
- **大收藏夹扫描优化**：大幅提升大型收藏夹的扫描速度和成功率。
- **错误信息更清晰**：扫描失败时，提示信息更具体，便于定位问题。

## v2.8.0.20260115 (2026-01-15)
- **联合投稿支持增强**：现在可以下载联合投稿视频中所有创作成员的头像。

## v2.8.0.20260113 (2026-01-13)
- **充电视频识别优化**：减少对非充电视频的误判。
- **新增推送渠道**：支持使用 Server酱3 发送通知。
- **视频流兼容性提升**：更好地支持多种视频格式。

## v2.8.0.20260109 (2026-01-09)
- **修复批量重命名重复执行问题**：通过API批量重命名后的文件不会再被重复处理。
- **批量重命名支持重命名文件夹**：批量重命名视频时，其所在文件夹（单P视频）也会同步改名。

## v2.8.0.20260108-2 (2026-01-08)
- **AI重命名设置简化**：将高级选项移至各视频源的独立设置中，全局设置页面更简洁。
- **修复重命名冲突**：修复了AI批量重命名时可能和扫描任务产生冲突的问题。

## v2.8.0.20260108 (2026-01-08)
- **AI重命名效率提升**：改为批量处理模式，减少请求次数，同一批文件命名风格更一致。
- **重命名状态追踪更准**：新增标记字段，准确记录文件是否已被AI重命名，避免误判。
- **AI更“听话”**：强化提示词指令，确保AI严格遵循您自定义的命名格式。
- **新增操作指引**：在相关页面添加了提示词写法的说明。
- **AI会话自动恢复**：当AI服务达到会话上限或出错时，会自动恢复并保持命名风格。

## v2.8.0.20260105-2 (2026-01-05)
- **AI批量重命名功能增强**：
    - 修复自定义提示词不生效的问题。
    - 自动处理重名文件，避免跳过。
    - 为需要集数编号的格式（如s01e001）提供排序信息。
    - 番剧视频源现在也支持批量历史重命名。

## v2.8.0.20260105 (2026-01-05)
- **新增DeepSeek免费API支持**：无需API Key，配置Token即可使用AI重命名功能。
- **AI服务自动维护**：自动下载并更新所需的AI组件；Token过期时会发出提醒。

## v2.8.0 (2026-01-05)
- **AI重命名功能上线**：支持使用AI（如DeepSeek）智能优化视频文件名，可全局或按视频源单独设置。
- **文件夹同步重命名**：AI重命名视频文件时，其所在子文件夹也会一同改名（单P视频）。
- **数据库性能优化**：修复了高并发时可能出现的数据库锁冲突问题。

## v2.7.8.20260104-2 (2026-01-04)
- **新增“仅保留M4A”模式**：在仅下载音频时，可选择只保留音频文件，跳过封面、字幕等。
- **新增“平铺目录”模式**：启用后所有文件直接存放在视频源根目录，不创建子文件夹，适合作为音乐库管理。

## v2.7.8.20260104 (2026-01-04)
- **首页显示优化**：番剧入库时显示具体的系列名称，而非“番剧”标签。
- **UP主扫描性能提升**：修复了选择性下载模式下每次仍需全量扫描的问题，后续扫描速度大幅提升。

## v2.7.8.20260102-4 (2026-01-02)
- **新增错误通知推送**：程序运行发生关键错误（如下载失败、API请求失败等）时，会自动推送通知到您配置的渠道。

## v2.7.8.20260102-3 (2026-01-02)
- **多P视频增量下载**：支持仅下载UP主后续新增的分P视频，已下载的内容不受影响。
- **单P变多P自动处理**：当单P视频被UP主改为多P时，会自动触发全部重新下载并通知您。

## v2.7.8.20260102-2 (2026-01-02)
- **首页信息显示优化**：“最新入库”以弹窗形式展示，状态区分更清晰；“下载任务”、“当前监听”等状态的描述文字更明确易懂。

## v2.7.8.20260102 (2026-01-02)
- **视频源管理快捷操作**：在管理页面为每个视频源添加了快捷按钮，可一键切换“仅下载音频”、“下载弹幕”、“下载字幕”选项。

## v2.7.8.20260101 (2026-01-01)
- **新增视频源下载选项**：
    - **仅下载音频**：可为每个视频源单独设置，开启后只下载M4A音频文件。
    - **弹幕/字幕开关**：可独立控制每个视频源是否下载弹幕和字幕文件。

## v2.7.8.20251222 (2025-12-22)
- **修复磁盘空间显示**：修复了Docker/群晖环境下磁盘空间被重复计算导致显示异常的问题。

## v2.7.8.2025122102 (2025-12-21)
- **联合投稿信息完善**：NFO文件现在会包含联合投稿视频的所有创作团队成员信息。

## v2.7.8.20251221 (2025-12-21)
- **首页磁盘空间显示优化**：智能去重，更准确地显示各磁盘的实际剩余空间。

## v2.7.8.20251211 (2025-12-11)
- **关键词过滤器升级**：
    - 支持同时设置**白名单**和**黑名单**，规则更灵活。
    - 新增**大小写敏感**设置选项。
    - 支持在添加视频源时直接配置过滤规则。

## v2.7.8.20251207 (2025-12-07)
- **操作体验修复**：修复了视频详情页删除视频后页面跳转异常的问题。

## v2.7.8.20251206 (2025-12-06)
- **页面显示修复**：修复了视频管理页面翻页时内容显示错误的bug。

## v2.7.8.202512054 (2025-12-05)
- **新增“选择历史投稿”功能**：添加UP主投稿源时，可以通过弹窗直接勾选其历史视频进行下载，已下载的会自动排除。

## v2.7.8.202512053 (2025-12-05)
- **修复添加收藏夹/合集错误**：修复了从“我追的”列表中添加时，因ID识别错误导致添加不对的问题。

## v2.7.8.202512052 (2025-12-05)
- **推送消息优化**：修复了企业微信推送消息过长导致失败的问题，超长内容会自动截断。

## v2.7.8.20251205 (2025-12-05)
- **修复合集集数错误**：修复了UP主非顺序上传时，合集中视频集数显示错误的问题，现在使用B站官方定义的顺序。

## v2.7.7.5.15 (2025-12-04)
- **视频详情页导航增强**：
    - 新增“上一个/下一个”视频的跳转按钮。
    - 显示当前视频在列表中的位置。
    - 支持输入页码快速跳转。

## v2.7.7.5.14 (2025-12-04)
- **风控验证通知**：触发B站风控需要验证时，会推送通知提醒您。
- **删除体验优化**：在视频详情页删除视频后，会自动跳转到相邻视频。

## v2.7.7.5.13 (2025-12-04)
- **新增企业微信推送**：通知推送渠道新增“企业微信群机器人”选项。

## v2.7.7.5.12 (2025-11-20)
- **日志优化**：减少不必要的日志输出，关键信息更清晰。
- **音频下载兼容性提升**：高品质音频不可用时自动回退，确保视频能正常下载。

## v2.7.7.5.11 (2025-11-17)
- **新增PWA支持**：可将Web管理界面安装为桌面/手机应用程序。
- **在线播放错误提示优化**：对已删除视频的播放提示更友好。

## v2.7.7.5.10 (2025-11-08)
- **修复在线播放403错误**：修复了部分视频因请求头问题无法在线播放的情况。

## v2.7.7.5.8 (2025-11-07)
- **媒体库封面兼容性增强**：为合集、番剧、多P视频的文件夹新增多种封面命名，全面兼容 Emby 和 Jellyfin。
- **修复番剧文件夹分离问题**：修复了同一系列番剧因标题空格差异被分到不同文件夹的问题。

## v2.7.7.5.7 (2025-11-07)
- **修复UP主头像匹配问题**：调整UP主头像的存储方式，修复其在Emby等媒体库中无法匹配视频演员信息的问题。

## v2.7.7.5.6 (2025-10-09)
- **修复在线播放崩溃**：修复了点击在线播放可能导致程序崩溃的bug。

## v2.7.7.5.5 (2025-10-09)
- **日志输出优化**：减少技术性日志的输出，界面信息更简洁。

## v2.7.7.5.4 (2025-10-08)
- **默认配置优化**：新安装的用户将获得更佳的开箱即用体验（如默认启用合集季结构、CDN优化等）。

## v2.7.7.5.3 (2025-10-08)
- **空目录自动清理**：删除视频后，其所在的空文件夹会被自动清理。
- **番剧管理优化**：优化番剧系列名称处理和季文件夹的生成逻辑。

## v2.7.7.5.2 (2025-09-28)
- **视频源批量操作**：支持批量添加和删除视频源。

## v2.7.7.5.1 (2025-09-26)
- **防止重复添加**：在添加视频源页面，已添加的源会被标记并禁用选择。

## v2.7.7.5 (2025-09-25)
- **番剧信息显示优化**：在视频源页面更清晰地展示番剧的季度信息。
- **番剧合并功能**：添加新番剧时，可选择合并到已有的同系列番剧源中。

## 更早版本主要更新
- **关键词过滤**：支持为视频源设置关键词规则，过滤不需要的视频。
- **服务器端口自定义**：可以在设置中修改程序运行的端口。
- **增量下载与断点续传**：大幅提升UP主投稿、收藏夹等视频源的扫描效率。
- **风控验证系统**：支持通过验证码手动或自动绕过B站风控限制。
- **推送通知系统**：集成Server酱，支持任务完成、错误告警等消息推送。
- **媒体库元数据支持**：为视频生成NFO文件、下载封面和演员头像，适配Jellyfin/Emby/Plex。
- **多P视频、合集、番剧支持**：完善了对各类复杂视频内容的支持与管理。

（更详细的历史版本信息可在项目发布页面查看）
